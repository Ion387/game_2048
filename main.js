(()=>{var e={208:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(601),r=s.n(n),o=s(314),i=s.n(o)()(r());i.push([e.id,"body {\n  box-sizing: border-box;\n}\n\n#modal {\n  position: absolute;\n  left: calc(50% - 200px);\n  top: 300px;\n  width: 400px;\n  height: 200px;\n  border: 6px solid #534546;\n  border-radius: 20px;\n  background-color: #ffffff;\n  font-size: 40px;\n  font-weight: 500;\n  text-align: center;\n  padding-top: 40px;\n}\n\n#startButton {\n  position: absolute;\n  left: calc(50% - 100px);\n  top: 450px;\n  width: 200px;\n  height: 50px;\n  font-size: 20px;\n  cursor: pointer;\n  border: 4px solid #534546;\n  border-radius: 20px;\n}\n\n#score {\n  margin: 100px auto 20px;\n  width: 240px;\n  height: 50px;\n  border: 6px solid #90958f;\n  border-radius: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 40px;\n}\n\n#field {\n  display: block;\n  margin: 0 auto;\n  background-color: #d0c0b0;\n  width: 450px;\n  height: 450px;\n  border: 6px solid #90958f;\n  border-radius: 20px;\n}\n",""]);const a=i},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&i[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),s&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=s):u[2]=s),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},511:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var n=s(72),r=s.n(n),o=s(825),i=s.n(o),a=s(659),c=s.n(a),l=s(56),u=s.n(l),d=s(540),h=s.n(d),p=s(113),f=s.n(p),v=s(208),m={};m.styleTagTransform=f(),m.setAttributes=u(),m.insert=c().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=h(),r()(v.A,m);const x=v.A&&v.A.locals?v.A.locals:void 0},72:e=>{"use strict";var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var o={},i=[],a=0;a<e.length;a++){var c=e[a],l=n.base?c[0]+n.base:c[0],u=o[l]||0,d="".concat(l," ").concat(u);o[l]=u+1;var h=s(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=r(p,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}i.push(d)}return i}function r(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var o=n(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var a=s(o[i]);t[a].references--}for(var c=n(e,r),l=0;l<o.length;l++){var u=s(o[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=c}}},659:e=>{"use strict";var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,r&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var o=s.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},69:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PlayGame:()=>o}),s(44);class n{constructor(){}#e=0;isGameEnd=!1;gameEndText="";new(e){const t=this.cells.filter((e=>0===e.value));if(0===t.length)this.isGameEnd=!0,this.gameEndText="Нельзя сделать ход";else{const s=t[Math.floor(Math.random()*t.length)].index;this.cells[s].value=e||(Math.random()<.9?2:4),this.cells[s].viewNew()}}moveCacl(e){const{ratio:t,stepsCounter:s}=this.#t(e);for(let e=0;16!==e;e++){if(this.#s(e))continue;const n=s(e);0===n||this.#n(e+t)?this.cells[e].tempValue=this.cells[e].value:(this.cells[e].steps=n,this.cells[e+n*t].tempValue=this.cells[e].value)}}moveView(e){const t=document.getElementById("field").getContext("2d");let s=[],n=[];const{xMoveRatio:r,yMoveRatio:o}=this.#t(e);for(let e=0;e<16;e++)this.cells[e].steps&&(s[e]=110*this.cells[e].steps*r/20,n[e]=110*this.cells[e].steps*o/20);let i=0,a=setInterval((()=>{i++,t.clearRect(0,0,450,450);for(let e=0;16!==e;e++)this.cells[e].steps?this.cells[e].viewNew(10+110*this.cells[e].x+s[e]*i,10+110*this.cells[e].y+n[e]*i):this.cells[e].value&&this.cells[e].viewNew()}),10);setTimeout((()=>{clearInterval(a)}),200)}clearAfterMove(){for(let e=0;16!==e;e++)this.cells[e].value=this.cells[e].tempValue,this.cells[e].tempValue=0,this.cells[e].steps=0}merge(e){let{ratio:t,mergeFrom:s,mergeTo:n,mergeInc:r}=this.#t(e);for(let o=s;o!==n;o+=r)this.#s(o)||this.#n(o-t)||this.#s(o-t)||this.cells[o].value===this.cells[o-t].value&&this.#r(e,o,o-t)&&(this.cells[o].value*=2,2048===this.cells[o].value&&(this.isGameEnd=!0,this.gameEndText="Уровень пройден"),this.#o(this.cells[o-t].value),this.cells[o-t].value=0)}#o(e){const t=document.getElementById("score");this.#e+=e,t.innerText="СЧЁТ: "+this.#e}#n=e=>!this.cells[e];#s=e=>!this.cells[e].value;#r=(e,t,s)=>"left"===e||"right"===e?Math.floor(t/4)===Math.floor(s/4):"up"===e||"down"===e?t%4==s%4:void 0;#t=e=>{let t,s,n,r,o,i,a=()=>{};switch(e){case"up":t=-4,s=0,n=16,r=1,o=0,i=-1,a=t=>this.cells.filter((s=>0===s.value&&this.#r(e,s.index,t)&&s.index<t)).length;break;case"down":t=4,s=15,n=-1,r=-1,o=0,i=1,a=t=>this.cells.filter((s=>0===s.value&&this.#r(e,s.index,t)&&s.index>t)).length;break;case"right":t=1,s=15,n=-1,r=-1,o=1,i=0,a=t=>this.cells.filter((s=>0===s.value&&this.#r(e,s.index,t)&&s.index>t)).length;break;case"left":t=-1,s=0,n=16,r=1,o=-1,i=0,a=t=>this.cells.filter((s=>0===s.value&&this.#r(e,s.index,t)&&s.index<t)).length}return{ratio:t,mergeFrom:s,mergeTo:n,mergeInc:r,xMoveRatio:o,yMoveRatio:i,stepsCounter:a}}}class r{value=0;tempValue=0;steps=0;constructor(e){this.index=e,this.x=e%4,this.y=Math.floor(e/4)}#i(){switch(this.value){case 0:return"#fff";case 2:return"#eee4da";case 4:return"#eee0c6";case 8:return"#f9b377";case 16:return"#ff9b60";case 32:return"#cb6a49";case 64:return"#ec6233";case 128:return"#e8c463";case 256:return"#e0ba55";case 512:return"#f3c54b";case 1024:return"#f2c138";case 2048:return"#f3bd29"}}viewNew(e=10+110*this.x,t=10+110*this.y){const s=document.getElementById("field").getContext("2d");this.value&&(s.beginPath(),s.moveTo(e+20,t),s.arcTo(e+100,t,e+100,t+100,20),s.arcTo(e+100,t+100,e,t+100,20),s.arcTo(e,t+100,e,t,20),s.arcTo(e,t,e+100,t,20),s.closePath(),s.strokeStyle="#aaa",s.stroke(),s.textAlign="center",s.textBaseline="middle",s.fillStyle=this.#i(),s.fill(),s.fillStyle="#000",s.strokeStyle="#111",s.font="40px sans-serif",s.fillText(this.value,e+50,t+50))}}class o extends n{constructor(){super(),this.#a()}#a(){this.cells=[];for(let e=0;e<=15;e++)this.cells[e]=new r(e);super.new(2),super.new(2),this.#c()}keydownBoundFunction=this.#l.bind(this);touchMoveBoundFunction=this.#u.bind(this);#c(){document.addEventListener("keydown",this.keydownBoundFunction),document.addEventListener("touchmove",this.touchMoveBoundFunction)}#d(){document.removeEventListener("keydown",this.keydownBoundFunction),document.removeEventListener("touchmove",this.touchMoveBoundFunction)}#h(e){this.#d(),super.moveCacl(e),super.moveView(e),setTimeout((()=>{super.clearAfterMove(),super.merge(e),super.moveCacl(e),super.moveView(e)}),201),setTimeout((()=>{super.clearAfterMove(),this.#c(),this.isGameEnd?this.#p(this.gameEndText):super.new()}),420)}#l(e){switch(e.key.toLowerCase()){case"w":case"ц":case"arrowup":this.#h("up");break;case"s":case"ы":case"arrowdown":this.#h("down");break;case"d":case"в":case"arrowright":this.#h("right");break;case"a":case"ф":case"arrowleft":this.#h("left")}}firstTouch={x:0,y:0};#u(e){const t=e.touches[0];this.firstTouch.x&&this.firstTouch.y||(this.firstTouch={x:t.pageX,y:t.pageY});const s=t.pageX-this.firstTouch.x,n=t.pageY-this.firstTouch.y;if(Math.abs(s)>40||Math.abs(n)>40)if(this.firstTouch={x:0,y:0},Math.abs(s)>=Math.abs(n))switch(!0){case s<0:this.#h("left");break;case s>0:this.#h("right")}else switch(!0){case n<0:this.#h("up");break;case n>0:this.#h("down")}}#p(e){this.#d();const t=document.getElementById("modal");t.style.display="block",t.innerText=e;const s=document.getElementById("startButton");s.style.display="block",s.onclick=()=>{document.getElementById("field").getContext("2d").clearRect(0,0,450,450),t.style.display="none",s.style.display="none",this.isGameEnd=!1,this.#a()}}}},44:(e,t,s)=>{const{PlayGame:n}=s(69);s(511),new n}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nc=void 0,s(44)})();